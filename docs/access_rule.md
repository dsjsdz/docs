# 接口约定

### 我们为使用场景(包含但不局限于 公众号、小程序、APP)提供多种获取数据接口方式，即 `直接请求API` 和 `商户OpenAPI`。

| 接口方式      | 公众号(网页) | 小程序   | 支付商户  | 其他需求  |
|-----------|---------|-------|-------|-------|
| 直接请求API   | 可定制     | 可定制   | 可定制   | 可定制   |
| 商户OpenAPI | 商户自对接   | 商户自对接 | 商户自对接 | 商户自对接 |

## 直接请求API

模版可定制，可参考 `有赞商城` ，接口请求方式如下: 

:::tip
```{url}/api/v1/xxx```
:::

#### {url} 默认为提供服务的地址

#### xxx 为请求的具体方法或者动作

## 商户OpenAPI

`商户OpenAPI` 需要携带 `Header` 参数，只能获取设备信息，用户侧信息由商户自主开发。

:::tip
```{url}/api/openapi/v1/xxx```
:::

#### {url} 默认为提供服务的地址

#### xxx 为请求的具体方法或者动作

## 请求结果(成功)

`code`: 请求成功 数值固定为 `0`

`message`: 请求成功 内容固定为 `ok`

`data`: 请求的数据(使用了protobuf，其中: 零值 或 false 不传)。

```json
{
  "code": 0,
  "message": "ok",
  "data": {}
}
```

## 请求结果(失败)

`code`: 错误代码, 具体可参考 [错误代码明细](error_code.md)

`message`: 错误信息, 具体可参考 [错误代码明细](error_code.md)

`data`: 空对象 或者 nil

```json
{
  "code": 10014,
  "message": "*************",
  "data": {}
}
```

