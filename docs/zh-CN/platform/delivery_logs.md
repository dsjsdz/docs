# 🚚 出货日志

一、功能概述

出货日志用于记录售卖机每一次出货行为的详细信息，包括系统下发命令、设备执行状态及最终反馈结果。
该模块帮助商户快速定位出货异常、分析设备运行情况，并为售后退款与补货提供依据。

二、日志来源与更新机制

出货日志由售卖机在执行出货指令时自动生成：

用户下单 → 系统生成订单

系统向售卖机下发出货命令

售卖机执行出货并反馈结果（成功 / 失败 / 超时）

平台接收设备反馈并写入出货日志

所有日志均实时同步到云端数据库，确保数据可追溯与可审计。

三、主要功能

1. 📋 出货记录列表

出货日志以时间倒序显示，支持多条件筛选：

售卖机编号 / 名称

货道编号（如 A01、B05）

商品名称

出货状态（成功 / 失败 / 超时）

执行来源（用户订单 / 管理员测试 / 系统补货检测）

时间范围

2. 🔍 日志详情

点击任意记录可查看完整出货过程：

日志编号

所属商户 / 售卖机名称

货道编号与商品信息

订单编号（如为用户购买触发）

出货指令发送时间

设备响应时间与反馈码

执行耗时（毫秒级）

结果状态（成功 / 失败 / 超时 / 未响应）

错误信息（如货道卡货、电机异常、通信超时等）

3. ⚠️ 异常出货识别

系统会自动识别并标注异常出货事件：

异常类型 说明
通信超时 售卖机未在规定时间内返回反馈信号
卡货异常 电机执行异常或货物未成功掉落
无库存 货道空置或库存未更新
硬件错误 出货模块或主控板故障

对于异常出货，系统会自动关联对应订单，便于后续退款处理或售后复核。

4. 🧾 出货统计与分析

支持多维度统计：

各售卖机出货成功率

每个货道的出货成功 / 失败次数

异常类型占比图

平均响应时长趋势

可按天、周、月导出统计报表

5. 📤 日志导出

支持将筛选后的出货记录导出为 Excel / CSV 文件，用于线下审计或售后管理。

四、权限与安全
角色 权限说明
平台管理员 可查看所有商户出货日志
商户 仅可查看自己名下售卖机的出货记录
区域管理员 可查看负责区域内的设备日志
技术支持 只读权限，可查看出货指令和错误码详情
五、使用示例

例：商户“张三便利”在后台打开 出货日志 → 筛选“学校A区售卖机”，时间范围选择“今天”。
系统显示：

出货总数：132 次

成功出货：129 次

出货失败：3 次

A05 货道：卡货

B02 货道：通信超时

C03 货道：库存为 0
商户可根据日志信息判断需要派人现场维护或补货。
